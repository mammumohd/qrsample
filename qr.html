<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <xsl:variable name="variantType">
            <xsl:value-of select="/online_boardingpass/variantType"/>
        </xsl:variable>
        <xsl:variable name="clear_X" select="'X'"/>
        <xsl:choose>
            <xsl:when test="$variantType = 'online-check-in'">
                <div class="mobileCheckIn-section filterBoxSection">
                    <div class="boarding-pass">
                        <h2 class="checkin-types-head pass-head">
                         
                        </h2>
                        <p class="pass-desc checkin-desc">
                         
                        </p>
                        <div class="select-box-parent">
                            <div class="select-box">
                                <span class="arrowdown"></span>
                                <span class="float-text hideitem">
                                    
                                </span>
                                <span class="clear-text hideitem">
                                  
                                </span>
                                <input type="text" class="citytext element" name="dropdownbox-1">
                                    <xsl:attribute name="value"></xsl:attribute>
                                    <xsl:attribute name="placeholder">
                                       
                                    </xsl:attribute>
                                </input>
                            </div>
                            <div class="dropdown-box hideitem third-classname">
                                <ul>
                                    <li class="default hideitem">
                                        <xsl:attribute name="tabindex">-1</xsl:attribute>
                                        <xsl:attribute name="disabled">true</xsl:attribute>
                                         No Result
                                    </li>
                                    <xsl:apply-templates mode="dropdown" select="/online_boardingpass/onlineBoardingpassContainer">
										 <xsl:with-param name="variantType">
											
										</xsl:with-param>
									</xsl:apply-templates>
                                </ul>
                            </div>
                        </div>
                        <div class="print-pass">
                            <xsl:apply-templates mode="div" select="/online_boardingpass/onlineBoardingpassContainer">
							 <xsl:with-param name="variantType">
                                    
                             </xsl:with-param>
							</xsl:apply-templates>
                        </div>
                    </div>
                </div>
            </xsl:when>
            <xsl:when test="$variantType = 'kiosk-check-in'">
                <div class="airportcheckin-section mobileCheckIn-section grey-mob">
                    <div class="airport-checkin-section-top">
                        <xsl:value-of select="/online_boardingpass/common_description" disable-output-escaping="yes" />
                    </div>
                    <div class="filterBoxSection">
                        <div class="boarding-pass">
                            <h2 class="checkin-types-head pass-head">
                               
                            </h2>
                            <p class="pass-desc checkin-desc">
                             
                            </p>
                            <div class="select-box-parent">
                                <div class="select-box">
                                    <span class="arrowdown"></span>
                                    <span class="float-text hideitem">
                                     
                                    </span>
                                    <span class="clear-text hideitem">
                                       
                                    </span>
                                    <input type="text" class="citytext element" name="dropdownbox-1">
                                        <xsl:attribute name="value"></xsl:attribute>
                                        <xsl:attribute name="placeholder">
                                           
                                        </xsl:attribute>
                                    </input>
                                </div>
                                <div class="dropdown-box hideitem third-classname">
                                    <ul>
                                        <li class="default hideitem">
                                            <xsl:attribute name="tabindex">-1</xsl:attribute>
                                            <xsl:attribute name="disabled">true</xsl:attribute>
                                             No Result
                                        </li>
                                        <xsl:apply-templates mode="dropdown" select="/online_boardingpass/onlineBoardingpassContainer"/>
                                    </ul>
                                </div>
                            </div>
                            <div class="print-pass">
                                <xsl:apply-templates mode="div" select="/online_boardingpass/onlineBoardingpassContainer"/>
                            </div>
                        </div>
                    </div>
                </div>
            </xsl:when>
            <xsl:otherwise>
                <div class="airportcheckin-section mobileCheckIn-section grey-mob section2">
                    <div class="airport-checkin-section-top">
                        <xsl:value-of select="/online_boardingpass/common_description" disable-output-escaping="yes" />
                    </div>
                    <div class="filterBoxSection">
                        <div class="boarding-pass">
                            <h2 class="checkin-types-head pass-head">
                             
                            </h2>
                            <p class="pass-desc checkin-desc">
                            
                            </p>
                            <div class="select-box-parent">
                                <div class="select-box">
                                    <span class="arrowdown"></span>
                                    <span class="float-text hideitem">
                                       
                                    </span>
                                    <span class="clear-text hideitem">
                                       
                                    </span>
                                    <input type="text" class="citytext element" name="dropdownbox-1">
                                        <xsl:attribute name="value"></xsl:attribute>
                                        <xsl:attribute name="placeholder">
                                           
                                        </xsl:attribute>
                                    </input>
                                </div>
                                <div class="dropdown-box hideitem third-classname">
                                    <ul>
                                        <li class="default hideitem">
                                            <xsl:attribute name="tabindex">-1</xsl:attribute>
                                            <xsl:attribute name="disabled">true</xsl:attribute>
                                             No Result
                                        </li>
                                        <xsl:apply-templates mode="dropdown" select="/online_boardingpass/onlineBoardingpassContainer">
											<xsl:with-param name="variantType">
												<xsl:value-of select="$variantType" />
											</xsl:with-param>
								        </xsl:apply-templates>
                                    </ul>
                                </div>
                            </div>
                            <div class="print-pass">
                                <xsl:apply-templates mode="div" select="/online_boardingpass/onlineBoardingpassContainer">
								 <xsl:with-param name="variantType">
                                    <xsl:value-of select="$variantType" />
                                </xsl:with-param>
								<!-- <xsl:with-param name="available_text">
                                    <xsl:value-of select="available_text" />
                                </xsl:with-param>
								<xsl:with-param name="not_available_text">
                                    <xsl:value-of select="$not_available_text" />
                                </xsl:with-param> -->
								</xsl:apply-templates>
                            </div>
                        </div>
                    </div>
                </div>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
   <xsl:template  match="/online_boardingpass/onlineBoardingpassContainer" mode="dropdown">
	   <xsl:param name="variantType" />
       
        
	<xsl:choose>
    <xsl:when test="$variantType = 'online-check-in'">
        <li>
            <xsl:attribute name="tabindex">-1</xsl:attribute>
            <xsl:attribute name="valueitem"><xsl:value-of select="normalize-space(boarding_city)"/></xsl:attribute>
            <xsl:value-of select="normalize-space(boarding_city)"/>
        </li>
   </xsl:when>
   <xsl:when test="$variantType = 'kiosk-check-in'">
		<li>
            <xsl:attribute name="tabindex">-1</xsl:attribute>
            <xsl:attribute name="valueitem">
                <xsl:value-of select="normalize-space(city_description)"/>
            </xsl:attribute>
            <xsl:value-of select="normalize-space(city_description)"/>
        </li>
    </xsl:when>
	<xsl:otherwise>
		<li>
            <xsl:attribute name="tabindex">-1</xsl:attribute>
            <xsl:attribute name="valueitem">
               <xsl:value-of select="normalize-space(boarding_city)"/>
            </xsl:attribute>
            <xsl:value-of select="normalize-space(boarding_city)"/>
        </li>
	</xsl:otherwise>
	</xsl:choose>
    </xsl:template>
  
    <xsl:template match="/online_boardingpass/onlineBoardingpassContainer" mode="div">
	<xsl:param name="variantType" />
    <!-- <xsl:param name="available_text" />
	<xsl:param name="not_available_text" /> -->
	<xsl:choose>
  <xsl:when test="$variantType = 'online-check-in'">
	      <div class="printpass-option hidecontent">
            <span class="print-head">
               
            </span>
            <span class="print-availability">
                <xsl:choose>
                    <xsl:when test="normalize-space(digital_Pass) = 'Available'">
                        <img>
                            <xsl:attribute name="src">
                               
                            </xsl:attribute>
                        </img>
                    
                    </xsl:when>
                    <xsl:otherwise>
                        <img>
                            <xsl:attribute name="src">
                            
                            </xsl:attribute>
                        </img>
                      
                    </xsl:otherwise>   
                </xsl:choose>
            </span>  
        </div>
	 </xsl:when>
	<xsl:when test="$variantType = 'kiosk-check-in'">
	     <div class="printpass-option hidecontent">
            <span class="print-head"></span>
            <span class="print-availability">
               <xsl:choose>
                    <xsl:when test="normalize-space(city_description) != null">
                        <xsl:value-of select="normalize-space(kiosk-description)" disable-output-escaping="yes"/>
                    </xsl:when>
                    <xsl:otherwise>
                         <xsl:value-of select="normalize-space(kiosk-description)" disable-output-escaping="yes"/>
                    </xsl:otherwise>   
                </xsl:choose>
                 
            </span>  
        </div>
	 </xsl:when>
	<xsl:otherwise>
	   <div class="printpass-option hidecontent">
            <div class="print-list-data">
               <xsl:choose>
                    <xsl:when test="normalize-space(boarding_city) != null">
                        <xsl:value-of select="normalize-space(counter-description)" disable-output-escaping="yes"/>
                    </xsl:when>
                    <xsl:otherwise>
                         <xsl:value-of select="normalize-space(counter-description)" disable-output-escaping="yes"/>
                    </xsl:otherwise>   
                </xsl:choose>
              </div>
        </div>
 </xsl:otherwise>
	</xsl:choose>
	</xsl:template>
</xsl:stylesheet>








*********************
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="html5-qrcode.min.js"></script>
<script	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<style>
#qr-canvas {
	border: brown 1px solid;
}
</style>
</head>
<body>
	<div id="radio" style="width: 200px"></div>
	<div id="reader" style="width: 200px; background-color: black; margin: auto;"></div>
<!-- 	<script>var layoutEngine=function(){var e,i=document.documentElement,n=i.style,o=" vendor-",r="edge",t="ie",s="khtml",d="mozilla",l="opera",w="webkit",v=" browser-",a="android",u="chrome",c="safari",m=c+"-ios",b="wiiu",p=o;if("msScrollLimit"in n||"behavior"in n)"msTextSizeAdjust"in n&&!("msFlex"in n)?(p+=r,e={vendor:r},"objectFit"in n||(p+=" vendor-edge-old"),support_color_unset=!1,window.CSS&&(support_color_unset=window.CSS.supports("color","unset")),"msImeAlign"in n&&"webkitTextStroke"in n&&!("objectFit"in n)?(p+=" vendor-edge--15",e.version=15):support_color_unset||"textStroke"in n||"textFill"in n||"objectFit"in n?!support_color_unset||"textStroke"in n||"textFill"in n||"objectFit"in n||(p+=" vendor-edge--13-14",e.version=1314):(p+=" vendor-edge--12",e.version=12)):(p+=t+o+t,e={vendor:t},"msImeAlign"in n?(p+="-11",e.version=11):"msUserSelect"in n?(p+="-10",e.version=10):"fill"in n?(p+="-9",e.version=9):"widows"in n?(p+="-8",e.version=8):(p+="-7",e.version=7));else if("WebkitAppearance"in n){p+=w;var f=navigator.userAgent;e={vendor:w},window.chrome||0<=f.indexOf("OPR")||0<=f.indexOf("wv")?(p+=v+u,e.browser=u):"webkitDashboardRegion"in n?(p+=v+c,e.browser=c):"webkitOverflowScrolling"in n?(p+=v+m,e.browser=m):0<=f.indexOf("Android")?(p+=v+a,e.browser=a):window.wiiu&&(p+=v+b,e.browser=b)}else if("MozAppearance"in n)p+=d,e={vendor:d};else if("OLink"in n||window.opera)p+=l,e={vendor:l},"OMiniFold"in n&&(p+="-mini",e.browser="mini");else{if(!("KhtmlUserInput"in n))return!1;p+=s,e={vendor:s}}return i.className+=p,e}();</script>	
	<script>
		$( document ).ready(function() {
    			alert(JSON.stringify(layoutEngine) +" *****" + window.navigator.platform + "******"+ window.navigator.userAgent);
			console.log(layoutEngine);
			
		});
	</script> -->
</body>
</html>
 <script>

	const html5QrCode = new Html5Qrcode("reader", false);

	Html5Qrcode.getCameras().then(devices => {

		if (devices && devices.length) {
			start(devices);
		}else{
			console.log("Error in identify camera");
			alert("Error in identify camera1");
		}

	}).catch(err => {
		console.log("Error in identify camera");
		alert("Error in identify camera2");
	});


  	function start(devices){

		const config = { fps: 10, qrbox: 100 };

		if(devices.length > 1){

			for (var k=0; k < devices.length; k++) {
					
				$('#radio').append(
					$('<input>').prop({
						type: 'radio',
						id: devices[k].id,
						name: 'contact',
						value: devices[k].id
					})
				).append(
					$('<label>').prop({
						for: devices[k].id
					}).html(devices[k].label)
				);
			};

			html5QrCode.start({ facingMode: { exact: "environment"} }, config, onScanSuccess,onErrorScan).catch(err => {
				console.log("Unable to start scanning, error: "+err);
				alert("Error in identify camera4");
			});
			
		}else{

			html5QrCode.start({ facingMode: { exact: "environment"} }, config, onScanSuccess,onErrorScan).catch(err => {
				console.log("Unable to start scanning, error: "+err);
				alert("Error in identify camera5");
			});

		}

	}

	function onScanSuccess(qrCodeMessage) {
		console.log(qrCodeMessage);
		alert(qrCodeMessage);
		html5QrCode.stop();
		//location.reload();
	}

	function onErrorScan(err){
	}

	function stopScan(){
		html5QrCode.stop();
	}
  
</script>
